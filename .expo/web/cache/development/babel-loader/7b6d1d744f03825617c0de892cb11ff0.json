{"ast":null,"code":"import _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nvar _jsxFileName = \"C:\\\\distribuidas\\\\apps\\\\sarasapp\\\\app\\\\screens\\\\MovieDetails\\\\index.js\";\nimport React, { useState, useEffect } from 'react';\nimport ScrollView from \"react-native-web/dist/exports/ScrollView\";\nimport View from \"react-native-web/dist/exports/View\";\nimport Text from \"react-native-web/dist/exports/Text\";\nimport { Feather } from '@expo/vector-icons';\nimport ReadMore from 'react-native-read-more-text';\nimport { Alert } from \"../../components/common/Alert\";\nimport { Share } from \"../../components/common/Share\";\nimport Screen from \"../../components/common/Screen\";\nimport Spinner from \"../../components/common/Spinner\";\nimport NotificationCard from \"../../components/cards/NotificationCard\";\nimport PosterRow from \"../../components/cards/rows/PosterRow\";\nimport PersonModal from \"../../components/modals/PersonModal\";\nimport PersonListRow from \"../../components/cards/rows/PersonListRow\";\nimport PersonRow from \"../../components/cards/rows/PersonRow\";\nimport SectionRow from \"../../components/cards/rows/SectionRow\";\nimport MainInfoRow from \"../../components/cards/rows/MainInfoRow\";\nimport { TouchableOpacity } from \"../../components/common/TouchableOpacity\";\nimport request from \"../../services/api\";\nimport { getImageApi } from \"../../utils/images\";\nimport { convertMinsToHrsMins } from \"../../utils/time\";\nimport { convertToUpperCaseFirstLetter } from \"../../utils/letters\";\nimport { convertToDate } from \"../../utils/dates\";\nimport { convertToDolar } from \"../../utils/currency\";\nimport { convertToGenres } from \"../../utils/genre\";\nimport { sliceArrayLength } from \"../../utils/array\";\nimport isoLanguage from \"../../data/iso.json\";\nimport { darkBlue } from \"../../utils/colors\";\nimport styles from \"./styles\";\nvar UNINFORMED = 'Uninformed';\nvar INITIAL_INFO = {\n  id: '',\n  backdropPath: '',\n  title: '',\n  voteAverage: 0,\n  video: [],\n  overview: UNINFORMED,\n  cast: [],\n  crew: [],\n  productionCompanies: [],\n  images: [],\n  infosDetail: {\n    Duration: UNINFORMED,\n    Genre: UNINFORMED,\n    Language: UNINFORMED,\n    Release: UNINFORMED,\n    Budget: UNINFORMED,\n    Revenue: UNINFORMED,\n    Adult: UNINFORMED\n  }\n};\nvar ADULT_RATE = {\n  true: 'No',\n  false: 'Yes'\n};\n\nvar renderReadMoreFooter = function renderReadMoreFooter(text, handlePress) {\n  return React.createElement(TouchableOpacity, {\n    onPress: handlePress,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 62,\n      columnNumber: 3\n    }\n  }, React.createElement(Text, {\n    style: styles.readMore,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 63,\n      columnNumber: 5\n    }\n  }, text));\n};\n\nvar MovieDetails = function MovieDetails(_ref) {\n  var navigation = _ref.navigation;\n\n  var _useState = useState(true),\n      _useState2 = _slicedToArray(_useState, 2),\n      isLoading = _useState2[0],\n      setIsLoading = _useState2[1];\n\n  var _useState3 = useState(false),\n      _useState4 = _slicedToArray(_useState3, 2),\n      isError = _useState4[0],\n      setIsError = _useState4[1];\n\n  var _useState5 = useState(false),\n      _useState6 = _slicedToArray(_useState5, 2),\n      isVisible = _useState6[0],\n      setIsVisible = _useState6[1];\n\n  var _useState7 = useState(false),\n      _useState8 = _slicedToArray(_useState7, 2),\n      showImage = _useState8[0],\n      setShowImage = _useState8[1];\n\n  var _useState9 = useState(null),\n      _useState10 = _slicedToArray(_useState9, 2),\n      creditId = _useState10[0],\n      setCreditId = _useState10[1];\n\n  var _useState11 = useState(INITIAL_INFO),\n      _useState12 = _slicedToArray(_useState11, 2),\n      info = _useState12[0],\n      setInfo = _useState12[1];\n\n  useEffect(function () {\n    navigation.setParams({\n      handleShare: handleShare\n    });\n    requestMoviesInfo();\n  }, []);\n\n  requestMoviesInfo = function requestMoviesInfo() {\n    var id, data;\n    return _regeneratorRuntime.async(function requestMoviesInfo$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            _context.prev = 0;\n            setIsLoading(true);\n            id = navigation.state.params.id;\n            _context.next = 5;\n            return _regeneratorRuntime.awrap(request(\"movie/\" + id, {\n              include_image_language: 'en,null',\n              append_to_response: 'credits,videos,images'\n            }));\n\n          case 5:\n            data = _context.sent;\n            setIsLoading(false);\n            setIsError(false);\n            setInfo({\n              id: id,\n              backdropPath: data.backdrop_path || INITIAL_INFO.backdropPath,\n              title: data.title || INITIAL_INFO.title,\n              voteAverage: data.vote_average || INITIAL_INFO.voteAverage,\n              video: data.videos.results[0] || INITIAL_INFO.video,\n              overview: data.overview || INITIAL_INFO.overview,\n              cast: sliceArrayLength(data.credits.cast, 15),\n              crew: sliceArrayLength(data.credits.crew, 15),\n              productionCompanies: sliceArrayLength(data.production_companies, 10),\n              images: formatImageUrl(data.images.backdrops),\n              infosDetail: getInfosDetail(data)\n            });\n            _context.next = 15;\n            break;\n\n          case 11:\n            _context.prev = 11;\n            _context.t0 = _context[\"catch\"](0);\n            setIsLoading(false);\n            setIsError(true);\n\n          case 15:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, null, null, [[0, 11]], Promise);\n  };\n\n  getInfosDetail = function getInfosDetail(_ref2) {\n    var _ref2$runtime = _ref2.runtime,\n        runtime = _ref2$runtime === void 0 ? 0 : _ref2$runtime,\n        _ref2$genres = _ref2.genres,\n        genres = _ref2$genres === void 0 ? '' : _ref2$genres,\n        _ref2$original_langua = _ref2.original_language,\n        original_language = _ref2$original_langua === void 0 ? '' : _ref2$original_langua,\n        _ref2$release_date = _ref2.release_date,\n        release_date = _ref2$release_date === void 0 ? '' : _ref2$release_date,\n        _ref2$budget = _ref2.budget,\n        budget = _ref2$budget === void 0 ? 0 : _ref2$budget,\n        _ref2$revenue = _ref2.revenue,\n        revenue = _ref2$revenue === void 0 ? 0 : _ref2$revenue,\n        _ref2$adult = _ref2.adult,\n        adult = _ref2$adult === void 0 ? '' : _ref2$adult;\n    return {\n      Duration: convertMinsToHrsMins(runtime),\n      Genre: convertToGenres(sliceArrayLength(genres, 2)),\n      Language: convertToUpperCaseFirstLetter(isoLanguage[original_language]),\n      Release: convertToDate(release_date),\n      Budget: convertToDolar(budget),\n      Revenue: convertToDolar(revenue),\n      Adult: ADULT_RATE[adult] || UNINFORMED\n    };\n  };\n\n  formatImageUrl = function formatImageUrl(images) {\n    return sliceArrayLength(images, 15).map(function (item) {\n      return getImageApi(item.file_path, 'url', 'original');\n    });\n  };\n\n  handleVisibleModal = function handleVisibleModal() {\n    setIsVisible(!isVisible);\n  };\n\n  handlePerson = function handlePerson(id) {\n    setCreditId(id);\n    handleVisibleModal();\n  };\n\n  handleImage = function handleImage() {\n    setShowImage(!showImage);\n  };\n\n  handleShare = function handleShare(title, id) {\n    if (isError) {\n      Alert({\n        title: 'Attention',\n        description: 'Something wrong has happened, please try again later.'\n      });\n    } else {\n      Share({\n        message: title + \", know everything about this movie \\uD83C\\uDF7F\",\n        url: \"https://www.themoviedb.org/movie/\" + id,\n        title: 'AmoCinema',\n        dialogTitle: title + \", know everything about this movie \\uD83C\\uDF7F\"\n      });\n    }\n  };\n\n  renderItem = function renderItem(item, type, handleTeamDetail) {\n    return React.createElement(PersonRow, {\n      item: item,\n      type: type,\n      onTeamDetail: handleTeamDetail,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 166,\n        columnNumber: 5\n      }\n    });\n  };\n\n  renderListEmpty = function renderListEmpty() {\n    return React.createElement(View, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 170,\n        columnNumber: 5\n      }\n    }, React.createElement(Text, {\n      style: styles.subTitleInfo,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 171,\n        columnNumber: 7\n      }\n    }, \"Uninformed\"));\n  };\n\n  {\n    var backdropPath = info.backdropPath,\n        voteAverage = info.voteAverage,\n        video = info.video,\n        title = info.title,\n        infosDetail = info.infosDetail,\n        overview = info.overview,\n        cast = info.cast,\n        crew = info.crew,\n        productionCompanies = info.productionCompanies,\n        images = info.images;\n    var navigate = navigation.navigate;\n    return React.createElement(Screen, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 191,\n        columnNumber: 7\n      }\n    }, React.createElement(View, {\n      style: styles.container,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 192,\n        columnNumber: 9\n      }\n    }, isLoading ? React.createElement(Spinner, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 194,\n        columnNumber: 13\n      }\n    }) : isError ? React.createElement(NotificationCard, {\n      icon: \"alert-octagon\",\n      onPress: requestMoviesInfo,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 196,\n        columnNumber: 13\n      }\n    }) : React.createElement(ScrollView, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 201,\n        columnNumber: 13\n      }\n    }, React.createElement(PosterRow, {\n      title: title,\n      backdropPath: backdropPath,\n      voteAverage: voteAverage,\n      images: images,\n      video: video,\n      navigate: navigate,\n      showImage: showImage,\n      onPress: handleImage,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 202,\n        columnNumber: 15\n      }\n    }), React.createElement(View, {\n      style: styles.containerMovieInfo,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 212,\n        columnNumber: 15\n      }\n    }, React.createElement(MainInfoRow, {\n      data: infosDetail,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 213,\n        columnNumber: 17\n      }\n    }), React.createElement(SectionRow, {\n      title: \"Synopsis\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 214,\n        columnNumber: 17\n      }\n    }, React.createElement(ReadMore, {\n      numberOfLines: 3,\n      renderTruncatedFooter: function renderTruncatedFooter(handlePress) {\n        return renderReadMoreFooter('Read more', handlePress);\n      },\n      renderRevealedFooter: function renderRevealedFooter(handlePress) {\n        return renderReadMoreFooter('Read less', handlePress);\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 215,\n        columnNumber: 19\n      }\n    }, React.createElement(Text, {\n      style: styles.subTitleInfo,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 224,\n        columnNumber: 21\n      }\n    }, overview))), React.createElement(SectionRow, {\n      title: \"Main cast\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 227,\n        columnNumber: 17\n      }\n    }, React.createElement(PersonListRow, {\n      data: cast,\n      type: \"character\",\n      keyItem: \"creditId\",\n      ListEmptyComponent: renderListEmpty,\n      onTeamDetail: handlePerson,\n      renderItem: renderItem,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 228,\n        columnNumber: 19\n      }\n    })), React.createElement(SectionRow, {\n      title: \"Main technical team\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 237,\n        columnNumber: 17\n      }\n    }, React.createElement(PersonListRow, {\n      data: crew,\n      type: \"job\",\n      keyItem: \"creditId\",\n      ListEmptyComponent: renderListEmpty,\n      onTeamDetail: handlePerson,\n      renderItem: renderItem,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 238,\n        columnNumber: 19\n      }\n    })), React.createElement(SectionRow, {\n      title: \"Producer\",\n      isLast: true,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 247,\n        columnNumber: 17\n      }\n    }, React.createElement(PersonListRow, {\n      data: productionCompanies,\n      type: \"production\",\n      keyItem: \"id\",\n      ListEmptyComponent: renderListEmpty,\n      onTeamDetail: handlePerson,\n      renderItem: renderItem,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 248,\n        columnNumber: 19\n      }\n    })))), React.createElement(PersonModal, {\n      isVisible: isVisible,\n      creditId: creditId,\n      style: styles.bottomModal,\n      onClose: handleVisibleModal,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 260,\n        columnNumber: 11\n      }\n    })));\n  }\n};\n\nMovieDetails.navigationOptions = function (_ref3) {\n  var navigation = _ref3.navigation;\n\n  var _ref4 = navigation.state.params || {},\n      id = _ref4.id,\n      title = _ref4.title,\n      handleShare = _ref4.handleShare;\n\n  return {\n    title: 'Movie details',\n    headerRight: React.createElement(TouchableOpacity, {\n      style: styles.buttonShare,\n      onPress: function onPress() {\n        return handleShare(title, id);\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 278,\n        columnNumber: 7\n      }\n    }, React.createElement(Feather, {\n      name: \"share\",\n      size: 23,\n      color: darkBlue,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 282,\n        columnNumber: 9\n      }\n    }))\n  };\n};\n\nexport default MovieDetails;","map":{"version":3,"sources":["C:/distribuidas/apps/sarasapp/app/screens/MovieDetails/index.js"],"names":["React","useState","useEffect","Feather","ReadMore","Alert","Share","Screen","Spinner","NotificationCard","PosterRow","PersonModal","PersonListRow","PersonRow","SectionRow","MainInfoRow","TouchableOpacity","request","getImageApi","convertMinsToHrsMins","convertToUpperCaseFirstLetter","convertToDate","convertToDolar","convertToGenres","sliceArrayLength","isoLanguage","darkBlue","styles","UNINFORMED","INITIAL_INFO","id","backdropPath","title","voteAverage","video","overview","cast","crew","productionCompanies","images","infosDetail","Duration","Genre","Language","Release","Budget","Revenue","Adult","ADULT_RATE","true","false","renderReadMoreFooter","text","handlePress","readMore","MovieDetails","navigation","isLoading","setIsLoading","isError","setIsError","isVisible","setIsVisible","showImage","setShowImage","creditId","setCreditId","info","setInfo","setParams","handleShare","requestMoviesInfo","state","params","include_image_language","append_to_response","data","backdrop_path","vote_average","videos","results","credits","production_companies","formatImageUrl","backdrops","getInfosDetail","runtime","genres","original_language","release_date","budget","revenue","adult","map","item","file_path","handleVisibleModal","handlePerson","handleImage","description","message","url","dialogTitle","renderItem","type","handleTeamDetail","renderListEmpty","subTitleInfo","navigate","container","containerMovieInfo","bottomModal","navigationOptions","headerRight","buttonShare"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { ScrollView, View, Text } from 'react-native';\nimport { Feather } from '@expo/vector-icons';\nimport ReadMore from 'react-native-read-more-text';\n\nimport { Alert } from '../../components/common/Alert';\nimport { Share } from '../../components/common/Share';\nimport Screen from '../../components/common/Screen';\nimport Spinner from '../../components/common/Spinner';\nimport NotificationCard from '../../components/cards/NotificationCard';\nimport PosterRow from '../../components/cards/rows/PosterRow';\nimport PersonModal from '../../components/modals/PersonModal';\nimport PersonListRow from '../../components/cards/rows/PersonListRow';\nimport PersonRow from '../../components/cards/rows/PersonRow';\nimport SectionRow from '../../components/cards/rows/SectionRow';\nimport MainInfoRow from '../../components/cards/rows/MainInfoRow';\nimport { TouchableOpacity } from '../../components/common/TouchableOpacity';\n\nimport request from '../../services/api';\n\nimport { getImageApi } from '../../utils/images';\nimport { convertMinsToHrsMins } from '../../utils/time';\nimport { convertToUpperCaseFirstLetter } from '../../utils/letters';\nimport { convertToDate } from '../../utils/dates';\nimport { convertToDolar } from '../../utils/currency';\nimport { convertToGenres } from '../../utils/genre';\nimport { sliceArrayLength } from '../../utils/array';\n\nimport isoLanguage from '../../data/iso.json';\n\nimport { darkBlue } from '../../utils/colors';\nimport styles from './styles';\n\nconst UNINFORMED = 'Uninformed';\nconst INITIAL_INFO = {\n  id: '',\n  backdropPath: '',\n  title: '',\n  voteAverage: 0,\n  video: [],\n  overview: UNINFORMED,\n  cast: [],\n  crew: [],\n  productionCompanies: [],\n  images: [],\n  infosDetail: {\n    Duration: UNINFORMED,\n    Genre: UNINFORMED,\n    Language: UNINFORMED,\n    Release: UNINFORMED,\n    Budget: UNINFORMED,\n    Revenue: UNINFORMED,\n    Adult: UNINFORMED\n  }\n};\nconst ADULT_RATE = {\n  true: 'No',\n  false: 'Yes'\n};\n\nconst renderReadMoreFooter = (text, handlePress) => (\n  <TouchableOpacity onPress={handlePress}>\n    <Text style={styles.readMore}>{text}</Text>\n  </TouchableOpacity>\n);\n\nconst MovieDetails = ({ navigation }) => {\n  const [isLoading, setIsLoading] = useState(true);\n  const [isError, setIsError] = useState(false);\n  const [isVisible, setIsVisible] = useState(false);\n  const [showImage, setShowImage] = useState(false);\n  const [creditId, setCreditId] = useState(null);\n  const [info, setInfo] = useState(INITIAL_INFO);\n\n  useEffect(() => {\n    navigation.setParams({ handleShare });\n    requestMoviesInfo();\n  }, []);\n\n  requestMoviesInfo = async () => {\n    try {\n      setIsLoading(true);\n\n      const { id } = navigation.state.params;\n      const data = await request(`movie/${id}`, {\n        include_image_language: 'en,null',\n        append_to_response: 'credits,videos,images'\n      });\n\n      setIsLoading(false);\n      setIsError(false);\n      setInfo({\n        id,\n        backdropPath: data.backdrop_path || INITIAL_INFO.backdropPath,\n        title: data.title || INITIAL_INFO.title,\n        voteAverage: data.vote_average || INITIAL_INFO.voteAverage,\n        video: data.videos.results[0] || INITIAL_INFO.video,\n        overview: data.overview || INITIAL_INFO.overview,\n        cast: sliceArrayLength(data.credits.cast, 15),\n        crew: sliceArrayLength(data.credits.crew, 15),\n        productionCompanies: sliceArrayLength(data.production_companies, 10),\n        images: formatImageUrl(data.images.backdrops),\n        infosDetail: getInfosDetail(data)\n      });\n    } catch (err) {\n      setIsLoading(false);\n      setIsError(true);\n    }\n  };\n\n  /* eslint-disable camelcase */\n  getInfosDetail = ({\n    runtime = 0,\n    genres = '',\n    original_language = '',\n    release_date = '',\n    budget = 0,\n    revenue = 0,\n    adult = ''\n  }) => ({\n    Duration: convertMinsToHrsMins(runtime),\n    Genre: convertToGenres(sliceArrayLength(genres, 2)),\n    Language: convertToUpperCaseFirstLetter(isoLanguage[original_language]),\n    Release: convertToDate(release_date),\n    Budget: convertToDolar(budget),\n    Revenue: convertToDolar(revenue),\n    Adult: ADULT_RATE[adult] || UNINFORMED\n  });\n  /* eslint-enable camelcase */\n\n  formatImageUrl = images =>\n    sliceArrayLength(images, 15).map(item =>\n      getImageApi(item.file_path, 'url', 'original')\n    );\n\n  handleVisibleModal = () => {\n    setIsVisible(!isVisible);\n  };\n\n  handlePerson = id => {\n    setCreditId(id);\n    handleVisibleModal();\n  };\n\n  handleImage = () => {\n    setShowImage(!showImage);\n  };\n\n  handleShare = (title, id) => {\n    if (isError) {\n      Alert({\n        title: 'Attention',\n        description: 'Something wrong has happened, please try again later.'\n      });\n    } else {\n      Share({\n        message: `${title}, know everything about this movie \\u{1F37F}`,\n        url: `https://www.themoviedb.org/movie/${id}`,\n        title: 'AmoCinema',\n        dialogTitle: `${title}, know everything about this movie \\u{1F37F}`\n      });\n    }\n  };\n\n  renderItem = (item, type, handleTeamDetail) => (\n    <PersonRow item={item} type={type} onTeamDetail={handleTeamDetail} />\n  );\n\n  renderListEmpty = () => (\n    <View>\n      <Text style={styles.subTitleInfo}>Uninformed</Text>\n    </View>\n  );\n\n  {\n    const {\n      backdropPath,\n      voteAverage,\n      video,\n      title,\n      infosDetail,\n      overview,\n      cast,\n      crew,\n      productionCompanies,\n      images\n    } = info;\n    const { navigate } = navigation;\n\n    return (\n      <Screen>\n        <View style={styles.container}>\n          {isLoading ? (\n            <Spinner />\n          ) : isError ? (\n            <NotificationCard\n              icon=\"alert-octagon\"\n              onPress={requestMoviesInfo}\n            />\n          ) : (\n            <ScrollView>\n              <PosterRow\n                title={title}\n                backdropPath={backdropPath}\n                voteAverage={voteAverage}\n                images={images}\n                video={video}\n                navigate={navigate}\n                showImage={showImage}\n                onPress={handleImage}\n              />\n              <View style={styles.containerMovieInfo}>\n                <MainInfoRow data={infosDetail} />\n                <SectionRow title=\"Synopsis\">\n                  <ReadMore\n                    numberOfLines={3}\n                    renderTruncatedFooter={handlePress =>\n                      renderReadMoreFooter('Read more', handlePress)\n                    }\n                    renderRevealedFooter={handlePress =>\n                      renderReadMoreFooter('Read less', handlePress)\n                    }\n                  >\n                    <Text style={styles.subTitleInfo}>{overview}</Text>\n                  </ReadMore>\n                </SectionRow>\n                <SectionRow title=\"Main cast\">\n                  <PersonListRow\n                    data={cast}\n                    type=\"character\"\n                    keyItem=\"creditId\"\n                    ListEmptyComponent={renderListEmpty}\n                    onTeamDetail={handlePerson}\n                    renderItem={renderItem}\n                  />\n                </SectionRow>\n                <SectionRow title=\"Main technical team\">\n                  <PersonListRow\n                    data={crew}\n                    type=\"job\"\n                    keyItem=\"creditId\"\n                    ListEmptyComponent={renderListEmpty}\n                    onTeamDetail={handlePerson}\n                    renderItem={renderItem}\n                  />\n                </SectionRow>\n                <SectionRow title=\"Producer\" isLast>\n                  <PersonListRow\n                    data={productionCompanies}\n                    type=\"production\"\n                    keyItem=\"id\"\n                    ListEmptyComponent={renderListEmpty}\n                    onTeamDetail={handlePerson}\n                    renderItem={renderItem}\n                  />\n                </SectionRow>\n              </View>\n            </ScrollView>\n          )}\n          <PersonModal\n            isVisible={isVisible}\n            creditId={creditId}\n            style={styles.bottomModal}\n            onClose={handleVisibleModal}\n          />\n        </View>\n      </Screen>\n    );\n  }\n};\n\nMovieDetails.navigationOptions = ({ navigation }) => {\n  const { id, title, handleShare } = navigation.state.params || {};\n\n  return {\n    title: 'Movie details',\n    headerRight: (\n      <TouchableOpacity\n        style={styles.buttonShare}\n        onPress={() => handleShare(title, id)}\n      >\n        <Feather name=\"share\" size={23} color={darkBlue} />\n      </TouchableOpacity>\n    )\n  };\n};\n\nexport default MovieDetails;\n"]},"metadata":{},"sourceType":"module"}